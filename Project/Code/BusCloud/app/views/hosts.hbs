<link rel="stylesheet" type="text/css" href="../css/host.css">
{{> leftrail}}
{{{{raw-helper}}}}
<div class="right" ng-controller="hostsController" data-ng-init="init()">
  <div class="heading-section">
    <h3>Available Bus</h3>
    <p>You are using the following buses</p>
  </div>
  <div>
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>IP Address</th>
          <th>Status</th>
          <th>Last Update</th>
          <th>Manage</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="bus in buses">
          <td>{{bus.name}}</td>
          <td>{{bus.description}}</td>
          <td>{{bus.ip}}</td>
          <td>{{convertStatus(bus.status)}}</td>
          <td>{{convertTime(bus.updatedAt)}}</td>
          <td><button ng-click="handleHostStatus(bus.id, bus.status)" class="btn btn-sm">{{btnStatus(bus.status)}}</button></td>
        </tr>
      </tbody>
    </table>
    <button class="btn btn-primary" data-toggle="modal" data-target="#myModal">Launch New Bus</button>
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Create New Bus</h4>
          </div>
          <div class="modal-body">
            <form class="form-create-bus" ng-submit="createBus()">
              <label for="inputName">Bus Name</label>
              <input type="text" id="inputName" ng-model="formBus.name" class="form-control" placeholder="Bus name" required autofocus>
              <br />
              <label for="inputDescription">Bus description</label>
              <input type="text" id="inputDescription" ng-model="formBus.description" class="form-control" placeholder="Bus description" required>
              <br />
              <div class="form-group routes-type">
                <label for="route-type">Select a route: </label>
                <div>
                  <select class="form-control" ng-model="formBus.route_id">
                    <option ng-repeat="route in routes" value={{route.id}}>{{route.description}}</option>
                  </select>
                </div>
              </div>
              <div class="form-group hubs-type">
                <label for="hub-type">Select a hub: </label>
                <div>
                  <select class="form-control" ng-model="formBus.sensorhub_id">
                    <option ng-repeat="hub in hubs" value={{hub.id}}>{{hub.name}}</option>
                  </select>
                </div>
              </div>
              <button type="submit" class="btn btn-primary submit-form">Create Bus</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{{{{/raw-helper}}}}
<script src="../js/controllers/hosts.js"></script>
